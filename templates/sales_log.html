<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–≥ –ø—Ä–æ–¥–∞–∂—ñ–≤ - –ú–∞–≥–∞–∑–∏–Ω –ü–ö</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üìã –ü–æ–≤–Ω–∏–π –ª–æ–≥ –ø—Ä–æ–¥–∞–∂—ñ–≤</h1>

        <nav>
            <a href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="/shop">–¢–æ–≤–∞—Ä–∏</a>
            <a href="/admin">–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</a>
            <a href="/admin/sales-log">–õ–æ–≥ –ø—Ä–æ–¥–∞–∂—ñ–≤</a>
        </nav>

        <div style="margin: 30px 0;">
            <h2>üìä –Ü—Å—Ç–æ—Ä—ñ—è –≤—Å—ñ—Ö –ø—Ä–æ–¥–∞–∂—ñ–≤ (–æ—Å—Ç–∞–Ω–Ω—ñ 100)</h2>

            {% if logs %}
            <!-- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 10px; color: white; text-align: center;">
                    <div style="font-size: 2em; font-weight: bold;">{{ logs|length }}</div>
                    <div>–í—Å—å–æ–≥–æ –∑–∞–ø–∏—Å—ñ–≤</div>
                </div>
                <div style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); padding: 20px; border-radius: 10px; color: white; text-align: center;">
                    <div style="font-size: 2em; font-weight: bold;">
                        {% set total_sold = logs|sum(attribute='quantity_sold') %}
                        {{ total_sold }}
                    </div>
                    <div>–ü—Ä–æ–¥–∞–Ω–æ –æ–¥–∏–Ω–∏—Ü—å</div>
                </div>
                <div style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%); padding: 20px; border-radius: 10px; color: white; text-align: center;">
                    <div style="font-size: 2em; font-weight: bold;">
                        {% set total_revenue = 0 %}
                        {% for log in logs %}
                            {% set total_revenue = total_revenue + (log.quantity_sold * log.price_at_sale) %}
                        {% endfor %}
                        ${{ total_revenue|round(2) }}
                    </div>
                    <div>–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∏—Ä—É—á–∫–∞</div>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü—è –ø—Ä–æ–¥–∞–∂—ñ–≤ -->
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–¢–æ–≤–∞—Ä</th>
                        <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
                        <th>–¶—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é</th>
                        <th>–°—É–º–∞</th>
                        <th>–î–∞—Ç–∞ –ø—Ä–æ–¥–∞–∂—É</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr>
                        <td>{{ log.id }}</td>
                        <td>
                            <strong>{{ log.product_name }}</strong>
                            <br>
                            <small style="color: #718096;">ID —Ç–æ–≤–∞—Ä—É: {{ log.product_id }}</small>
                        </td>
                        <td>
                            <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 5px;">
                                {{ log.quantity_sold }} —à—Ç
                            </span>
                        </td>
                        <td>${{ log.price_at_sale }}</td>
                        <td style="color: #48bb78; font-weight: bold; font-size: 1.1em;">
                            ${{ (log.quantity_sold * log.price_at_sale)|round(2) }}
                        </td>
                        <td>
                            {{ log.sale_date.strftime('%d.%m.%Y') }}
                            <br>
                            <small style="color: #718096;">{{ log.sale_date.strftime('%H:%M:%S') }}</small>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div style="text-align: center; padding: 50px; background: #f7fafc; border-radius: 10px;">
                <h3 style="color: #718096;">üì≠ –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø—Ä–æ–¥–∞–∂—ñ–≤</h3>
                <p style="color: #a0aec0;">–ü—Ä–æ–¥–∞–∂—ñ –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó –ø–æ–∫—É–ø–∫–∏</p>
            </div>
            {% endif %}
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div style="text-align: center; margin: 30px 0;">
            <a href="/admin" class="btn">‚Üê –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ</a>
        </div>
    </div>
</body>
</html>