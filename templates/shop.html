<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞–≥–∞–∑–∏–Ω –ü–ö –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üñ•Ô∏è –ú–∞–≥–∞–∑–∏–Ω –ü–ö –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤</h1>

        <nav>
            <a href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="/shop">–¢–æ–≤–∞—Ä–∏</a>
        </nav>

        <h2>–ö—É–ø—É–π—Ç–µ –Ω–∞–π–∫—Ä–∞—â—ñ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—á—ñ!</h2>

        <div class="products-grid">
            {% for item in items %}
            <div class="product-card">
                <img src="{{ url_for('static', filename='img/' + item.image) }}"
                     alt="{{ item.name }}"
                     onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">

                <span class="product-category">{{ item.category }}</span>

                <h3>{{ item.name }}</h3>

                <div class="product-price">${{ item.price }}</div>

                <div class="product-stock">
                    {% if item.quantity > 0 %}
                        ‚úÖ –í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ: {{ item.quantity }} —à—Ç
                    {% else %}
                        ‚ùå –ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
                    {% endif %}
                </div>

                {% if item.quantity > 0 %}
                <form method="POST" action="{{ url_for('buy', product_id=item.id) }}" style="margin: 0;">
                    <button type="submit" class="btn btn-add">
                        üõí –ö—É–ø–∏—Ç–∏
                    </button>
                </form>
                {% else %}
                <button class="btn btn-add" disabled style="opacity: 0.5; cursor: not-allowed;">
                    –ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
                </button>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                <div class="message {{ category }}">
                    {{ message }}
                </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

</body>
</html>